# ============================================
# FinanceAICrews Community Edition
# 环境变量配置模板
# ============================================
#
# 使用方法:
#   1. cp .env.example .env
#   2. 编辑 .env 填入你的配置
#   3. 启动服务: ./scripts/start_all.sh
#
# ============================================


# ╔════════════════════════════════════════════════════════════════════════════╗
# ║                         🔴 必填配置 (Required)                              ║
# ╚════════════════════════════════════════════════════════════════════════════╝

# === 数据库 (PostgreSQL) ===
# 格式: postgresql+asyncpg://user:password@host:port/dbname
# Docker 用户: 使用 docker-compose 时会自动配置
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/financeai

# === Redis 缓存 ===
REDIS_URL=redis://localhost:6379/0

# === 安全密钥 ===
# JWT 签名密钥 - 用于用户认证
# 生成方式: openssl rand -base64 32
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production

# API Key 加密密钥 - 用于加密存储用户的 LLM API Keys (BYOK)
# 生成方式: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-encryption-key-change-in-production

# === 社区版模式 ===
# 启用后所有用户自动获得完整功能权限，无需订阅
FAIC_SELF_HOSTED=true


# ╔════════════════════════════════════════════════════════════════════════════╗
# ║                      🟢 系统 LLM 配置 (按场景配置)                           ║
# ╚════════════════════════════════════════════════════════════════════════════╝
#
# 系统使用 9 个 LLM 场景 (Scope)，你可以为每个场景配置不同的模型：
#
#   场景分组          | 场景名称        | 用途说明
#   ----------------- | --------------- | ----------------------------------
#   Copilot           | copilot         | 聊天助手，与用户对话
#   Scan (扫描)       | quick_scan      | 快速扫描股票基本面
#                     | chart_scan      | 图表技术分析
#                     | cockpit_scan    | 驾驶舱概览扫描
#   Crew (团队)       | crew_router     | 智能路由选择 Crew
#                     | crew_summary    | 生成分析报告摘要
#   Agents (智能体)   | agents_fast     | 经济型 - 简单任务，成本低
#                     | agents_balanced | 标准型 - 日常分析，性价比高
#                     | agents_best     | 旗舰型 - 复杂推理，能力最强
#
# 配置格式 (每个场景都支持以下参数):
#   FAIC_LLM_{SCOPE}_PROVIDER      - 必填，提供商名称 (openai, anthropic, deepseek, zhipu_ai 等)
#   FAIC_LLM_{SCOPE}_MODEL         - 必填，模型名称
#   FAIC_LLM_{SCOPE}_API_KEY       - 必填，API 密钥
#   FAIC_LLM_{SCOPE}_BASE_URL      - 可选，自定义 API 地址
#   FAIC_LLM_{SCOPE}_TEMPERATURE   - 可选，温度参数 (默认 0.7)
#   FAIC_LLM_{SCOPE}_MAX_TOKENS    - 可选，最大输出 tokens
#   FAIC_LLM_{SCOPE}_ENABLE_THINKING - 可选，启用思考模式 (用于 DeepSeek-R1/GLM-4 等)
#
# 分组回退机制:
#   - quick_scan/chart_scan/cockpit_scan 未配置时，回退到 FAIC_LLM_SCAN_*
#   - crew_router/crew_summary 未配置时，回退到 FAIC_LLM_CREW_*
#   - agents_fast/balanced/best 未配置时，回退到 FAIC_LLM_AGENTS_*
#   - 所有场景最终回退到 FAIC_LLM_DEFAULT_*
#
# ============================================


# ┌────────────────────────────────────────────────────────────────────────────┐
# │ 方式一: 全局默认配置 (最简单，所有场景共用一个模型)                           │
# └────────────────────────────────────────────────────────────────────────────┘

# --- OpenAI 示例 ---
# FAIC_LLM_DEFAULT_PROVIDER=openai
# FAIC_LLM_DEFAULT_MODEL=gpt-4o-mini
# FAIC_LLM_DEFAULT_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx
# FAIC_LLM_DEFAULT_BASE_URL=https://api.openai.com/v1
# FAIC_LLM_DEFAULT_TEMPERATURE=0.7

# --- DeepSeek 示例 (性价比极高) ---
# FAIC_LLM_DEFAULT_PROVIDER=deepseek
# FAIC_LLM_DEFAULT_MODEL=deepseek-chat
# FAIC_LLM_DEFAULT_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx
# FAIC_LLM_DEFAULT_BASE_URL=https://api.deepseek.com
# FAIC_LLM_DEFAULT_TEMPERATURE=0.7

# --- 智谱 AI 示例 (国内推荐) ---
# FAIC_LLM_DEFAULT_PROVIDER=zhipu_ai
# FAIC_LLM_DEFAULT_MODEL=glm-4-flash
# FAIC_LLM_DEFAULT_API_KEY=xxxxxxxx.xxxxxxxxxxxxxxxx
# FAIC_LLM_DEFAULT_BASE_URL=https://open.bigmodel.cn/api/paas/v4
# FAIC_LLM_DEFAULT_TEMPERATURE=0.7


# ┌────────────────────────────────────────────────────────────────────────────┐
# │ 方式二: 分组配置 (推荐，平衡成本和效果)                                       │
# └────────────────────────────────────────────────────────────────────────────┘

# --- Copilot 聊天助手 (需要较好的对话能力) ---
FAIC_LLM_COPILOT_PROVIDER=openai
FAIC_LLM_COPILOT_MODEL=gpt-4o-mini
FAIC_LLM_COPILOT_API_KEY=sk-your-openai-api-key
FAIC_LLM_COPILOT_BASE_URL=https://api.openai.com/v1
FAIC_LLM_COPILOT_TEMPERATURE=0.7
# FAIC_LLM_COPILOT_MAX_TOKENS=4096
# FAIC_LLM_COPILOT_ENABLE_THINKING=false

# --- Scan 扫描类 (覆盖: quick_scan, chart_scan, cockpit_scan) ---
# 快速分析场景，对成本敏感，温度建议设低一些
FAIC_LLM_SCAN_PROVIDER=openai
FAIC_LLM_SCAN_MODEL=gpt-4o-mini
FAIC_LLM_SCAN_API_KEY=sk-your-openai-api-key
FAIC_LLM_SCAN_BASE_URL=https://api.openai.com/v1
FAIC_LLM_SCAN_TEMPERATURE=0.3
# FAIC_LLM_SCAN_MAX_TOKENS=1000

# --- Crew 团队类 (覆盖: crew_router, crew_summary) ---
FAIC_LLM_CREW_PROVIDER=openai
FAIC_LLM_CREW_MODEL=gpt-4o-mini
FAIC_LLM_CREW_API_KEY=sk-your-openai-api-key
FAIC_LLM_CREW_BASE_URL=https://api.openai.com/v1
FAIC_LLM_CREW_TEMPERATURE=0.7
# FAIC_LLM_CREW_MAX_TOKENS=2000

# --- Agents 智能体 (覆盖: agents_fast, agents_balanced, agents_best) ---
FAIC_LLM_AGENTS_PROVIDER=openai
FAIC_LLM_AGENTS_MODEL=gpt-4o
FAIC_LLM_AGENTS_API_KEY=sk-your-openai-api-key
FAIC_LLM_AGENTS_BASE_URL=https://api.openai.com/v1
FAIC_LLM_AGENTS_TEMPERATURE=0.7
# FAIC_LLM_AGENTS_MAX_TOKENS=4000


# ┌────────────────────────────────────────────────────────────────────────────┐
# │ 方式三: 精细配置 (高级用户，为每个场景单独配置)                                │
# └────────────────────────────────────────────────────────────────────────────┘

# --- 经济型 Agent (agents_fast) ---
# 简单任务用便宜模型
# FAIC_LLM_AGENTS_FAST_PROVIDER=deepseek
# FAIC_LLM_AGENTS_FAST_MODEL=deepseek-chat
# FAIC_LLM_AGENTS_FAST_API_KEY=sk-your-deepseek-api-key
# FAIC_LLM_AGENTS_FAST_BASE_URL=https://api.deepseek.com
# FAIC_LLM_AGENTS_FAST_TEMPERATURE=0.7

# --- 标准型 Agent (agents_balanced) ---
# 日常分析任务
# FAIC_LLM_AGENTS_BALANCED_PROVIDER=openai
# FAIC_LLM_AGENTS_BALANCED_MODEL=gpt-4o
# FAIC_LLM_AGENTS_BALANCED_API_KEY=sk-your-openai-api-key
# FAIC_LLM_AGENTS_BALANCED_BASE_URL=https://api.openai.com/v1
# FAIC_LLM_AGENTS_BALANCED_TEMPERATURE=0.7

# --- 旗舰型 Agent (agents_best) ---
# 复杂推理任务
# FAIC_LLM_AGENTS_BEST_PROVIDER=anthropic
# FAIC_LLM_AGENTS_BEST_MODEL=claude-3-5-sonnet-20241022
# FAIC_LLM_AGENTS_BEST_API_KEY=sk-ant-your-anthropic-api-key
# FAIC_LLM_AGENTS_BEST_BASE_URL=https://api.anthropic.com
# FAIC_LLM_AGENTS_BEST_TEMPERATURE=0.7


# ┌────────────────────────────────────────────────────────────────────────────┐
# │ 国内用户推荐配置示例                                                         │
# └────────────────────────────────────────────────────────────────────────────┘

# --- 智谱 AI 全套配置 (无需翻墙) ---
# FAIC_LLM_COPILOT_PROVIDER=zhipu_ai
# FAIC_LLM_COPILOT_MODEL=glm-4-plus
# FAIC_LLM_COPILOT_API_KEY=your-zhipu-api-key
# FAIC_LLM_COPILOT_BASE_URL=https://open.bigmodel.cn/api/paas/v4
# FAIC_LLM_COPILOT_TEMPERATURE=0.7
#
# FAIC_LLM_SCAN_PROVIDER=zhipu_ai
# FAIC_LLM_SCAN_MODEL=glm-4-flash
# FAIC_LLM_SCAN_API_KEY=your-zhipu-api-key
# FAIC_LLM_SCAN_BASE_URL=https://open.bigmodel.cn/api/paas/v4
# FAIC_LLM_SCAN_TEMPERATURE=0.3
#
# FAIC_LLM_AGENTS_PROVIDER=zhipu_ai
# FAIC_LLM_AGENTS_MODEL=glm-4-plus
# FAIC_LLM_AGENTS_API_KEY=your-zhipu-api-key
# FAIC_LLM_AGENTS_BASE_URL=https://open.bigmodel.cn/api/paas/v4

# --- DeepSeek + 智谱混合配置 (极致性价比) ---
# FAIC_LLM_SCAN_PROVIDER=deepseek
# FAIC_LLM_SCAN_MODEL=deepseek-chat
# FAIC_LLM_SCAN_API_KEY=sk-your-deepseek-api-key
# FAIC_LLM_SCAN_BASE_URL=https://api.deepseek.com
# FAIC_LLM_SCAN_TEMPERATURE=0.3
#
# FAIC_LLM_AGENTS_PROVIDER=deepseek
# FAIC_LLM_AGENTS_MODEL=deepseek-chat
# FAIC_LLM_AGENTS_API_KEY=sk-your-deepseek-api-key
# FAIC_LLM_AGENTS_BASE_URL=https://api.deepseek.com
#
# # 使用 DeepSeek-R1 思考模型进行复杂推理
# FAIC_LLM_AGENTS_BEST_PROVIDER=deepseek
# FAIC_LLM_AGENTS_BEST_MODEL=deepseek-reasoner
# FAIC_LLM_AGENTS_BEST_API_KEY=sk-your-deepseek-api-key
# FAIC_LLM_AGENTS_BEST_BASE_URL=https://api.deepseek.com
# FAIC_LLM_AGENTS_BEST_ENABLE_THINKING=true


# ╔════════════════════════════════════════════════════════════════════════════╗
# ║                       🟣 MCP 数据服务配置 (可选)                             ║
# ╚════════════════════════════════════════════════════════════════════════════╝

# MCP 全局开关
FAIC_MCP_ENABLED=true

# Akshare MCP - A股/中国市场数据
FAIC_MCP_AKSHARE_URL=http://localhost:8009/sse

# YFinance MCP - 美股/港股/全球市场数据
FAIC_MCP_YFINANCE_URL=http://localhost:8010/sse


# ╔════════════════════════════════════════════════════════════════════════════╗
# ║                        ⚪ 可选配置 (Optional)                                ║
# ╚════════════════════════════════════════════════════════════════════════════╝

# 运行环境 (development/staging/production)
ENVIRONMENT=development

# 日志级别 (DEBUG/INFO/WARNING/ERROR/CRITICAL)
LOG_LEVEL=INFO

# Serper 搜索 API - 用于新闻搜索
# 获取地址: https://serper.dev/
SERPER_API_KEY=

# Firecrawl - 高级网页爬取
# 获取地址: https://www.firecrawl.dev/
FIRECRAWL_API_KEY=


# ╔════════════════════════════════════════════════════════════════════════════╗
# ║                     🐳 Docker Compose 专用配置                              ║
# ╚════════════════════════════════════════════════════════════════════════════╝

# PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=financeai

# Redis
REDIS_PORT=6379

# 服务端口
BACKEND_PORT=8000
FRONTEND_PORT=3000
